ALLTPMS Telegram Bot

Telegram-бот для подбора TPMS-датчиков по параметрам автомобиля
(марка → год выпуска → модель) с фиксацией лидов и привязкой к менеджерам.

Описание

Бот предназначен для автоматизированного подбора датчиков давления в шинах (TPMS) на основе каталожных данных.
Система поддерживает сценарий сбора контактных данных клиента, сохранение лидов и передачу их ответственному менеджеру.

Функциональные возможности
Подбор TPMS-датчиков

последовательный выбор марки, года выпуска и модели автомобиля

ручной ввод марки, года или модели

постраничная навигация по спискам

Карточки товаров

отображение изображений товаров

отображение описания и технической информации

выбор конкретного датчика через интерактивную кнопку

Работа с лидами

сбор контактных данных клиента (имя и телефон)

сохранение лидов в CSV

автоматическая передача лида менеджеру

Работа с менеджерами

режим менеджера

регистрация по ключу

реферальные ссылки для закрепления клиентов

Дополнительно

поддержка алиасов брендов (например: BMW / бмв / бэмв)

Архитектура
Основные файлы проекта
.
├── bot.py                 # Telegram-бот (aiogram 3)
├── data_loader.py         # Каталог и индексация Excel-данных
├── requirements.txt       # Python-зависимости
├── .env                   # Конфигурация окружения
├── runtime.txt            # Версия Python (опционально)
├── data/
│   ├── brands.xlsx
│   ├── brandmodels.xlsx
│   ├── applicability.xlsx
│   ├── products.xlsx
│   └── brand_aliases.xlsx
├── leads.csv              # Лиды (создаётся автоматически)
└── managers.csv           # Менеджеры (создаётся автоматически)

Требования

Python 3.13.5

pip

Linux / macOS / Windows

Установка
1. Клонирование репозитория
git clone <repo_url>
cd alltpms-bot

2. Создание виртуального окружения
python3.13 -m venv venv
source venv/bin/activate

3. Установка зависимостей
pip install -r requirements.txt

Конфигурация

Создайте файл .env в корне проекта:

BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN

MANAGER_KEYS=key_xxx,key_yyy,key_zzz
ADMIN_CHAT_ID=

IMG_BASE=https://alltpms.ru/img/
SITE_BASE=https://alltpms.ru/

LEADS_CSV=leads.csv
MANAGERS_CSV=managers.csv

LOG_LEVEL=DEBUG

Запуск
python bot.py


При успешном запуске в логах будет выведено сообщение:

>>> bot.py ЗАПУСТИЛСЯ

Режим менеджера
Регистрация менеджера

Для регистрации менеджер должен отправить боту сообщение следующего вида:

key_xxx


Если ключ присутствует в переменной MANAGER_KEYS, менеджер будет зарегистрирован.

Реферальная ссылка

После регистрации менеджеру предоставляется персональная ссылка:

https://t.me/ALLTPMS_bot?start=key_xxx


Клиенты, перешедшие по данной ссылке, автоматически закрепляются за менеджером.

Лиды

все лиды сохраняются в файл leads.csv

формат данных включает:

марка автомобиля

год выпуска

модель

выбранный датчик

артикул

цена

имя клиента

телефон

менеджер

После фиксации лида менеджеру отправляется уведомление в Telegram.

Каталог (Excel)
Обязательные файлы

brands.xlsx — бренды автомобилей

brandmodels.xlsx — модели автомобилей

applicability.xlsx — применяемость

products.xlsx — товары

Опционально

brand_aliases.xlsx — алиасы брендов

Лицензия

Проект используется в коммерческих целях.
Все права принадлежат владельцу проекта.